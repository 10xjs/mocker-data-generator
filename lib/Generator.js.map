{"version":3,"sources":["../src/Generator.js"],"names":["ch","Generator","cfg","faker","db","DB","object","re","matches","exec","strFn","length","eval","chance","casual","randexp","gen","self","i","Math","floor","values","random","function","call","static","n","name","incrementalId","parseInt","hasOne","entity","get","amount","min","max","hasMany","Array","from","map"],"mappings":"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","file":"Generator.js","sourcesContent":["\nimport R from 'randexp'\nimport f from 'faker'\nimport c from 'casual'\nimport Ch from 'chance'\nconst ch = new Ch()\n\nexport default class Generator {\n\n    faker(cfg) {\n        let faker = f\n        let db = this.DB\n        let object = this.object\n\n        let re = /(^[a-zA-Z.]*)/   //aZ.aZ\n        let matches = re.exec(cfg.faker)\n        let strFn\n        if (matches && matches.length === 2){\n            strFn = 'faker.' + cfg.faker\n        }\n\n        re = /\\((.*?)\\)/ //Match ()\n        matches = re.exec(cfg.faker)\n        if (!matches){\n            strFn = 'faker.' + cfg.faker + '()'\n        }\n\n        return eval(strFn)\n    }\n\n    chance(cfg){\n        let chance = ch\n        let db = this.DB\n        let object = this.object\n\n        let re = /(^[a-zA-Z.]*)/   //aZ.aZ\n        let matches = re.exec(cfg.chance)\n        let strFn\n        if (matches && matches.length === 2){\n            strFn = 'chance.' + cfg.chance\n        }\n\n        re = /\\((.*?)\\)/ //Match ()\n        matches = re.exec(cfg.chance)\n        if (!matches){\n            strFn = 'chance.' + cfg.chance + '()'\n        }\n\n        return eval(strFn)\n    }\n\n    casual(cfg){\n        let casual = c\n        let re = /(^[a-zA-Z.]*)/   //aZ.aZ\n        let matches = re.exec(cfg.casual)\n        let strFn\n        if (matches && matches.length === 2){\n            strFn = 'casual.' + cfg.casual\n        }\n\n        return eval(strFn)\n    }\n\n    randexp(cfg){\n        return new R(cfg.randexp).gen()\n    }\n\n    self(cfg){\n        let object = this.object\n        return eval('object.' + cfg.self)\n    }\n\n    db(cfg){\n        let db = this.DB\n        return eval('db.' + cfg.db)\n    }\n\n    eval(cfg){\n        let db = this.DB\n        let object = this.object\n        let faker = f\n        let chance = ch\n        let casual = c\n        let randexp = R\n\n        return eval(cfg.eval)\n    }\n\n    values(cfg){\n        let i = Math.floor(cfg.values.length * Math.random());\n        return cfg.values[i]\n    }\n\n    function (cfg){\n        let object = this.object\n        let db = this.DB\n        let faker = f\n        let chance = ch\n        let casual = c\n        let randexp = R\n\n        return cfg.function.call({object, db, faker, chance, casual, randexp})\n    }\n\n    static (cfg){\n        return cfg.static\n    }\n\n    incrementalId (cfg){\n        let n = 0\n        let db = this.DB\n\n        if (db[this.name] && db[this.name].length){\n            n = db[this.name].length\n        }\n        if (cfg.incrementalId === true){\n            cfg.incrementalId = 0\n        }\n        return (n + parseInt(cfg.incrementalId))\n    }\n\n    hasOne(cfg){\n        let db = this.DB\n        let i = Math.floor(db[cfg.hasOne].length * Math.random());\n        let entity = db[cfg.hasOne][i]\n\n        if (cfg.get){\n            return eval('entity.' + cfg.get)\n        } else {\n            return entity\n        }\n    }\n\n    hasMany(cfg){\n        let amount = 1\n        let db = this.DB\n\n        let min = (cfg.min) ? cfg.min : 1\n        let max = (cfg.max) ? cfg.max : db[cfg.hasMany].length\n\n        if (cfg.amount){\n            amount = cfg.amount\n        } else {\n            amount = Math.floor(Math.random() * (max - min + 1)) + min;\n        }\n\n        return Array.from(new Array(amount)).map(() => this.hasOne({hasOne: cfg.hasMany}))\n    }\n}\n"]}